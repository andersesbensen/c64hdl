########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

TOP_MODULE := c64_tb

IVERILOG_OPT := 

#target for performing local simulation
local: sim_pre_cmd simulation sim_post_cmd

VERILOG_SRC := ../../modules/c64/c64.v \
../../modules/c64/pla.v \
../../modules/c64/ram.v \
../../modules/c64/rom.v \
../../modules/cia/cia.v \
../../modules/cpu/ALU.v \
../../modules/cpu/cpu.v \
../../modules/cpu/mos6510.v \
../../modules/sid/sid.v \
../../modules/sid/sid_env.v \
../../modules/sid/sid_filter.v \
../../modules/sid/sid_voice.v \
../../modules/vicii/vicii.v \
../../modules/vicii/vicii_palette.v \
../../modules/vicii/vicii_sprite.v \
../../testbench/c64/c64_tb.v \

VERILOG_OBJ := work/c64/.c64_v \
work/pla/.pla_v \
work/ram/.ram_v \
work/rom/.rom_v \
work/cia/.cia_v \
work/ALU/.ALU_v \
work/cpu/.cpu_v \
work/mos6510/.mos6510_v \
work/sid/.sid_v \
work/sid_env/.sid_env_v \
work/sid_filter/.sid_filter_v \
work/sid_voice/.sid_voice_v \
work/vicii/.vicii_v \
work/vicii_palette/.vicii_palette_v \
work/vicii_sprite/.vicii_sprite_v \
work/c64_tb/.c64_tb_v \

VHDL_SRC := 
VHDL_OBJ := 
simulation: include_dirs $(VERILOG_OBJ) $(VHDL_OBJ)
		iverilog $(IVERILOG_OPT) -s $(TOP_MODULE) -o $(TOP_MODULE).vvp -c run.command

include_dirs:
		echo "# IVerilog command file, generated by HDLMake" > run.command



work/c64/.c64_v: ../../modules/c64/c64.v \
work/pla/.pla_v \
work/ram/.ram_v \
work/rom/.rom_v \
work/cia/.cia_v \
work/mos6510/.mos6510_v \
work/sid/.sid_v \
work/vicii/.vicii_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/pla/.pla_v: ../../modules/c64/pla.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/ram/.ram_v: ../../modules/c64/ram.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/rom/.rom_v: ../../modules/c64/rom.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/cia/.cia_v: ../../modules/cia/cia.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/ALU/.ALU_v: ../../modules/cpu/ALU.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/cpu/.cpu_v: ../../modules/cpu/cpu.v \
work/ALU/.ALU_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/mos6510/.mos6510_v: ../../modules/cpu/mos6510.v \
work/cpu/.cpu_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/sid/.sid_v: ../../modules/sid/sid.v \
work/sid_env/.sid_env_v \
work/sid_filter/.sid_filter_v \
work/sid_voice/.sid_voice_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/sid_env/.sid_env_v: ../../modules/sid/sid_env.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/sid_filter/.sid_filter_v: ../../modules/sid/sid_filter.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/sid_voice/.sid_voice_v: ../../modules/sid/sid_voice.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/vicii/.vicii_v: ../../modules/vicii/vicii.v \
work/vicii_palette/.vicii_palette_v \
work/vicii_sprite/.vicii_sprite_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/vicii_palette/.vicii_palette_v: ../../modules/vicii/vicii_palette.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/vicii_sprite/.vicii_sprite_v: ../../modules/vicii/vicii_sprite.v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


work/c64_tb/.c64_tb_v: ../../testbench/c64/c64_tb.v \
work/c64/.c64_v \
work/rom/.rom_v
		echo $< >> run.command
		@mkdir -p $(dir $@) && touch $@


# USER SIM COMMANDS
sim_pre_cmd:
		
sim_post_cmd:
		

CLEAN_TARGETS := $(LIBS) run.command ivl_vhdl_work work

clean:
		rm -rf $(CLEAN_TARGETS)
mrproper: clean
		rm -rf *.vcd *.vvp

.PHONY: mrproper clean sim_pre_cmd sim_post_cmd simulation
